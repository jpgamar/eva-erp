# ── Database ──────────────────────────────────────────────
# Local: postgresql+asyncpg://postgres:postgres@localhost:54322/eva_erp
# Supabase: postgresql+asyncpg://postgres.[ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:54322/eva_erp

# ── JWT Auth ──────────────────────────────────────────────
# Generate a strong secret: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_SECRET_KEY=change-me-to-a-random-secret-key
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# ── Agent API Key Auth (automation) ──────────────────────
# If AGENT_API_KEY is set, requests can authenticate with header:
#   X-Agent-Key: <AGENT_API_KEY>
# AGENT_API_ACTOR_EMAIL should be an active ERP admin user email.
AGENT_API_KEY=
AGENT_API_ACTOR_EMAIL=

# ── CORS ──────────────────────────────────────────────────
# Comma-separated origins. Add your Vercel domain for production.
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# ── Stripe (EVA's account - read-only) ───────────────────
EVA_STRIPE_SECRET_KEY=sk_test_xxx
EVA_STRIPE_WEBHOOK_SECRET=whsec_xxx
STRIPE_RECONCILIATION_ENABLED=true
STRIPE_RECONCILIATION_INTERVAL_SECONDS=86400

# ── EVA Database (read-only for product metrics) ─────────
EVA_DATABASE_URL=postgresql+asyncpg://user:pass@host:5432/eva_production

# ── OpenAI ────────────────────────────────────────────────
OPENAI_API_KEY=sk-xxx
SENDGRID_API_KEY=

# ── Facturapi (CFDI electronic invoicing) ─────────────────
FACTURAPI_API_KEY=

# ── OpenClaw Infrastructure (SSH access to runtime hosts) ──
# Base64-encoded SSH private key for connecting to Hetzner hosts
# Generate: base64 -w0 ~/.ssh/id_ed25519_eva
EVA_SSH_PRIVATE_KEY_BASE64=
# Hetzner API token (for future server metadata enrichment)
HETZNER_API_TOKEN=

# ── Environment ───────────────────────────────────────────
# Set to "production" in deployed environments
ENVIRONMENT=development

# ── Monitoring ────────────────────────────────────────────
MONITORING_ENABLED=true
MONITORING_INTERVAL_SECONDS=30
MONITORING_CHECK_TIMEOUT_SECONDS=8
MONITORING_FAILURE_THRESHOLD_CRITICAL=2
MONITORING_FAILURE_THRESHOLD_DEFAULT=3
MONITORING_RECOVERY_THRESHOLD=2
MONITORING_STALE_AFTER_SECONDS=120
MONITORING_SLACK_WEBHOOK_URL=
# Legacy fallback frontend URL
MONITORING_FRONTEND_URL=https://app.goeva.ai
MONITORING_ERP_FRONTEND_URL=https://erp.goeva.ai
MONITORING_EVA_APP_FRONTEND_URL=https://app.goeva.ai
MONITORING_ERP_API_HEALTH_URL=https://eva-erp-goevaai-30a99658.koyeb.app/health/readiness
MONITORING_EVA_API_HEALTH_URL=https://api.goeva.ai/api/v1/health
MONITORING_WHATSAPP_HEALTH_URL=https://api.goeva.ai/api/v1/whatsapp/admin/webhook-health
MONITORING_SUPABASE_URL=
# Optional: key used by Supabase Auth health probe (falls back to SUPABASE_SERVICE_ROLE_KEY if empty)
MONITORING_SUPABASE_AUTH_API_KEY=
MONITORING_FMAC_ERP_FRONTEND_URL=https://erp.fmaccesorios.com
MONITORING_FMAC_ERP_BACKEND_URL=https://erp.fmaccesorios.com/api/v1/products
# Optional: PostgreSQL DSN for direct FMAccesorios ERP DB probe
# Example: postgresql://user:password@host:5432/database
MONITORING_FMAC_ERP_DB_URL=
# Optional: SendGrid probe for FMAccesorios ERP (falls back to SENDGRID_API_KEY)
MONITORING_SENDGRID_FMAC_URL=https://api.sendgrid.com/v3/scopes
MONITORING_SENDGRID_FMAC_API_KEY=
MONITORING_FACTURAPI_FMAC_URL=https://www.facturapi.io/v2/invoices?limit=1
MONITORING_FACTURAPI_EVA_ERP_URL=https://www.facturapi.io/v2/invoices?limit=1
MONITORING_FACTURAPI_EVA_APP_URL=https://www.facturapi.io/v2/invoices?limit=1
# Optional override keys per integration. If empty, FACTURAPI_API_KEY is used.
MONITORING_FACTURAPI_FMAC_API_KEY=
MONITORING_FACTURAPI_EVA_ERP_API_KEY=
MONITORING_FACTURAPI_EVA_APP_API_KEY=
